"use strict";(self.webpackChunkdance_event_app=self.webpackChunkdance_event_app||[]).push([[192],{192:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(43),l=a(203),s=a(951),o=a(579);const d=()=>{const[e,t]=(0,r.useState)(!1),[a,d]=(0,r.useState)([]),[n,i]=(0,r.useState)(null),[c,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)({}),[b,p]=(0,r.useState)([]),[h,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{y()},[]);const y=async()=>{t(!0);try{const e=await(0,l.Xp)();d(e)}catch(e){console.error("Failed to fetch bookings:",e),alert("Failed to fetch bookings. Please try again.")}finally{t(!1)}},f=async e=>{try{console.log("Loading available time slots for date:",e);const t=await(0,l.oZ)(e);console.log("Available slots:",t),p(t)}catch(t){console.error("Failed to load available time slots:",t),p([])}},j=async(e,t)=>{try{const a=await(0,l.oZ)(e);a.includes(t)||a.push(t),g(a.sort())}catch(a){console.error("Failed to load available time slots for editing:",a),g([t])}},N=e=>{if(!e)return"N/A";try{return new Date(e.toDate()).toLocaleString()}catch{return"N/A"}};return(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:(0,o.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-slate-200",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Admin Panel - Booking Management"}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsx)("button",{onClick:async()=>{x(!0);const e=s.J.eventDate;u({...m,date:e}),await f(e)},className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg hover:from-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"Add Booking"}),(0,o.jsx)("button",{onClick:async()=>{t(!0);try{const e=await(0,l.Y8)();if(e){const t=`dance_event_bookings_${(new Date).toISOString().split("T")[0]}.csv`;(0,l.Bf)(e,t)}else alert("No bookings found to export.")}catch(e){console.error("Export failed:",e),alert("Export failed. Please try again.")}finally{t(!1)}},disabled:e,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50",children:e?"Exporting...":"Export CSV"})]})]}),e?(0,o.jsx)("div",{className:"flex justify-center items-center p-12",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 border-purple-400/30 border-t-purple-400 rounded-full animate-spin"}),(0,o.jsx)("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-t-pink-400 rounded-full animate-spin animation-delay-150"})]})}):(0,o.jsxs)("div",{className:"overflow-x-auto",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:["All Bookings (",a.length," records)"]}),(0,o.jsxs)("table",{className:"min-w-full bg-white/80 backdrop-blur-sm border border-slate-200 rounded-lg overflow-hidden",children:[(0,o.jsx)("thead",{className:"bg-slate-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Actions"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Booking ID"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Date"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Time"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Type"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Price/Person"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Participant Name"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Full Name"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Phone"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Email"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"City"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Guru Name"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Category"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Amount/Slot"}),(0,o.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 uppercase tracking-wider border-b border-slate-200",children:"Timestamp"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-slate-200",children:a.map((e,t)=>(0,o.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,o.jsx)("td",{className:"px-4 py-2 text-sm border-b border-slate-200",children:(0,o.jsxs)("div",{className:"flex space-x-1",children:[(0,o.jsx)("button",{onClick:async()=>{i(e),await j(e.date,e.timeSlot)},className:"px-2 py-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-xs rounded hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 shadow-sm",children:"Edit"}),(0,o.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this booking?"))try{await(0,l.VA)(e),await y(),alert("Booking deleted successfully")}catch(t){console.error("Delete failed:",t),alert("Failed to delete booking. Please try again.")}})(e.id),className:"px-2 py-1 bg-gradient-to-r from-red-500 to-rose-500 text-white text-xs rounded hover:from-red-600 hover:to-rose-600 transition-all duration-300 shadow-sm",children:"Delete"})]})}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.bookingId}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.date}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.timeSlot}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.performanceTypeName}),(0,o.jsxs)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:["\u20b9",e.pricePerPerson]}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.participantName}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.fullName||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.phoneNumber||e.representativePhone||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.email||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.cityResidence||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.guruName||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.performanceCategory||"-"}),(0,o.jsxs)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:["\u20b9",e.amountPerSlot]}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:N(e.timestamp)})]},e.id||t))})]})]}),(0,o.jsxs)("div",{className:"mt-8 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[(0,o.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Admin Panel Instructions"}),(0,o.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"View Bookings:"})," All bookings are displayed by default"]}),(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"Add Booking:"}),' Click "Add Booking" to manually add a new booking']}),(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"Edit Booking:"}),' Click "Edit" on any row to modify booking details']}),(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"Delete Booking:"}),' Click "Delete" to remove a booking (with confirmation)']}),(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"Export CSV:"})," Download all bookings as a CSV file"]}),(0,o.jsx)("li",{children:"\u2022 CSV files can be opened in Excel, Google Sheets, or any spreadsheet application"})]})]}),n&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Edit Booking"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Booking ID"}),(0,o.jsx)("input",{type:"text",value:n.bookingId,onChange:e=>i({...n,bookingId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,o.jsx)("input",{type:"date",value:n.date,onChange:async e=>{const t=e.target.value;i({...n,date:t}),await j(t,n.timeSlot)},className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Time Slot"}),(0,o.jsxs)("select",{value:n.timeSlot,onChange:e=>i({...n,timeSlot:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,o.jsx)("option",{value:"",children:"Select a time slot"}),h.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Performance Type"}),(0,o.jsx)("input",{type:"text",value:n.performanceTypeName,onChange:e=>i({...n,performanceTypeName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,o.jsx)("input",{type:"text",value:n.fullName||"",onChange:e=>i({...n,fullName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,o.jsx)("input",{type:"text",value:n.phoneNumber||"",onChange:e=>i({...n,phoneNumber:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,o.jsx)("input",{type:"email",value:n.email||"",onChange:e=>i({...n,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,o.jsx)("input",{type:"text",value:n.cityResidence||"",onChange:e=>i({...n,cityResidence:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Guru Name"}),(0,o.jsx)("input",{type:"text",value:n.guruName||"",onChange:e=>i({...n,guruName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Performance Category"}),(0,o.jsx)("input",{type:"text",value:n.performanceCategory||"",onChange:e=>i({...n,performanceCategory:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount Per Slot"}),(0,o.jsx)("input",{type:"number",value:n.amountPerSlot,onChange:e=>i({...n,amountPerSlot:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,o.jsx)("button",{onClick:()=>i(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>(async e=>{try{await(0,l.vq)(e),i(null),await y(),alert("Booking updated successfully")}catch(t){console.error("Update failed:",t),alert("Failed to update booking. Please try again.")}})(n),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Update"})]})]})}),c&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Booking"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Booking ID"}),(0,o.jsx)("input",{type:"text",value:m.bookingId||"",onChange:e=>u({...m,bookingId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,o.jsx)("input",{type:"date",value:m.date||"",onChange:async e=>{const t=e.target.value;u({...m,date:t,timeSlot:""}),await f(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Time Slot"}),(0,o.jsxs)("select",{value:m.timeSlot||"",onChange:e=>u({...m,timeSlot:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,o.jsx)("option",{value:"",children:"Select a time slot"}),b.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Performance Type"}),(0,o.jsx)("input",{type:"text",value:m.performanceTypeName||"",onChange:e=>u({...m,performanceTypeName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,o.jsx)("input",{type:"text",value:m.fullName||"",onChange:e=>u({...m,fullName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,o.jsx)("input",{type:"text",value:m.phoneNumber||"",onChange:e=>u({...m,phoneNumber:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,o.jsx)("input",{type:"email",value:m.email||"",onChange:e=>u({...m,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,o.jsx)("input",{type:"text",value:m.cityResidence||"",onChange:e=>u({...m,cityResidence:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Guru Name"}),(0,o.jsx)("input",{type:"text",value:m.guruName||"",onChange:e=>u({...m,guruName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Performance Category"}),(0,o.jsx)("input",{type:"text",value:m.performanceCategory||"",onChange:e=>u({...m,performanceCategory:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount Per Slot"}),(0,o.jsx)("input",{type:"number",value:m.amountPerSlot||"",onChange:e=>u({...m,amountPerSlot:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,o.jsx)("button",{onClick:()=>{x(!1),u({})},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{await(0,l.Bx)(m),x(!1),u({}),await y(),alert("Booking added successfully")}catch(e){console.error("Add failed:",e),alert("Failed to add booking. Please try again.")}},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Add Booking"})]})]})})]})})}}}]);
//# sourceMappingURL=192.a042ea02.chunk.js.map