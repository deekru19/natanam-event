"use strict";(self.webpackChunkdance_event_app=self.webpackChunkdance_event_app||[]).push([[22],{22:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(43),r=a(203),l=a(951);class n{constructor(){this.accessToken=void 0,this.phoneNumberId=void 0,this.apiVersion="v21.0",this.baseUrl=void 0,this.accessToken="EAAKn4povOZCYBPJcgj3F909ZBVoFfipALlB4LkDJqaUmm8zuQlB31wpZA3Hj3MHwbkZCkq5EWCiExs5Mt2TJLMjp7AhFpR4TVBIp47waFi9vi84ecj0Ach0cNT1VkAOs9aiE32lzu8lktY0uLZBgn1NQ1wZBApykobcByhlwOC9cGk9xJPVvAgxRItsyaeaGIB82ZAZBdkCwi9PTZByETIljuC8smGMcph1szk5mSdW5Ty3u3ht8ZD",this.phoneNumberId="740409119156039",this.baseUrl=`https://graph.facebook.com/${this.apiVersion}`,this.accessToken&&this.phoneNumberId||console.error("Facebook WhatsApp credentials not found in environment variables")}replacePlaceholders(e,t){var a,s;let r=e;const l={"{name}":t.participantName||t.fullName||t.participant1Name||t.groupName||"N/A","{email}":t.email||"N/A","{phone}":t.phoneNumber||t.participant1Phone||t.representativePhone||"N/A","{booking_id}":t.bookingId||"N/A","{event_name}":"Natanam Dance Event","{event_date}":t.date||"N/A","{event_time}":t.timeSlot||"N/A","{performance_type}":t.performanceTypeName||t.performanceType||"N/A","{city}":t.cityResidence||"N/A","{guru_name}":t.guruName||"N/A","{category}":t.performanceCategory||"N/A","{price}":(null===(a=t.pricePerPerson)||void 0===a?void 0:a.toString())||"N/A","{amount}":(null===(s=t.amountPerSlot)||void 0===s?void 0:s.toString())||"N/A","{created_at}":t.timestamp?new Date(t.timestamp.toDate()).toLocaleDateString():"N/A","{participant_age}":t.participantAge||"N/A","{participant1_name}":t.participant1Name||"N/A","{participant2_name}":t.participant2Name||"N/A","{participant1_phone}":t.participant1Phone||"N/A","{participant2_phone}":t.participant2Phone||"N/A","{group_name}":t.groupName||"N/A","{member_names}":t.memberNames||"N/A","{representative_phone}":t.representativePhone||"N/A","{payment_id}":t.paymentId||"N/A","{status}":t.paymentStatus||"N/A"};return Object.keys(l).forEach(e=>{r=r.replace(new RegExp(e.replace(/[{}]/g,"\\$&"),"g"),l[e])}),r}getPhoneNumber(e){const t=e.phoneNumber||e.participant1Phone||e.representativePhone;if(!t)return null;let a=t.replace(/\D/g,"");return a.startsWith("91")||10!==a.length||(a="91"+a),a}async sendMessage(e,t){try{const a={messaging_product:"whatsapp",to:e,type:"text",text:{body:t}},s=await fetch(`${this.baseUrl}/${this.phoneNumberId}/messages`,{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const e=await s.json();return console.error("WhatsApp API error:",e),!1}const r=await s.json();return console.log("Message sent successfully:",r),!0}catch(a){return console.error("Error sending WhatsApp message:",a),!1}}async sendBatchMessages(e,t,a){const s=[];let r=0,l=0;for(let i=0;i<t.length;i++){const o=t[i];try{const n=this.getPhoneNumber(o);if(!n){s.push({booking:o,success:!1,error:"No valid phone number found"}),l++;continue}const d=this.replacePlaceholders(e,o),c=await this.sendMessage(n,d);s.push({booking:o,success:c,error:c?void 0:"Failed to send message"}),c?r++:l++,a&&a(i+1,t.length,r,l),i<t.length-1&&await new Promise(e=>setTimeout(e,100))}catch(n){s.push({booking:o,success:!1,error:n instanceof Error?n.message:"Unknown error"}),l++}}return{success:r,failed:l,results:s}}getAvailablePlaceholders(){return["{name}","{email}","{phone}","{booking_id}","{event_name}","{event_date}","{event_time}","{performance_type}","{city}","{guru_name}","{category}","{price}","{amount}","{created_at}","{participant_age}","{participant1_name}","{participant2_name}","{participant1_phone}","{participant2_phone}","{group_name}","{member_names}","{representative_phone}","{payment_id}","{status}"]}previewMessage(e,t){return this.replacePlaceholders(e,t)}}const i=new n;var o=a(579);const d=e=>{let{isOpen:t,onClose:a,bookings:r}=e;const[l,n]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[m,x]=(0,s.useState)(!1),[p,u]=(0,s.useState)({sent:0,total:0,success:0,failed:0}),[h,g]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null),f=i.getAvailablePlaceholders(),N=r.length>0?r[0]:null;(0,s.useEffect)(()=>{if(l&&N){const e=i.previewMessage(l,N);c(e)}else c("")},[l,N]);const v=()=>{m||(n(""),c(""),x(!1),u({sent:0,total:0,success:0,failed:0}),g(!1),y(null),a())};return t?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Send Batch WhatsApp Messages"}),(0,o.jsx)("button",{onClick:v,disabled:m,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold disabled:opacity-50",children:"\xd7"})]}),(0,o.jsxs)("p",{className:"text-gray-600 mt-2",children:["Send personalized messages to ",r.length," booking(s)"]})]}),(0,o.jsxs)("div",{className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Template"}),(0,o.jsx)("textarea",{id:"message-template",value:l,onChange:e=>n(e.target.value),placeholder:"Enter your message template with placeholders...",className:"w-full h-32 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",disabled:m}),(0,o.jsxs)("div",{className:"mt-3",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Available Placeholders:"}),(0,o.jsx)("div",{className:"flex flex-wrap gap-2 max-h-24 overflow-y-auto",children:f.map(e=>(0,o.jsx)("button",{onClick:()=>(e=>{const t=document.getElementById("message-template");if(t){const a=t.selectionStart,s=t.selectionEnd,r=l.substring(0,a)+e+l.substring(s);n(r),setTimeout(()=>{t.focus(),t.setSelectionRange(a+e.length,a+e.length)},0)}})(e),disabled:m,className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs hover:bg-blue-200 transition-colors disabled:opacity-50",children:e},e))})]})]}),d&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview (Sample Message)"}),(0,o.jsx)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg min-h-[80px] whitespace-pre-wrap",children:d}),(0,o.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Preview based on: ",(null===N||void 0===N?void 0:N.participantName)||(null===N||void 0===N?void 0:N.fullName)||"Sample booking"]})]}),m&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sending Progress"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,o.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:p.sent/p.total*100+"%"}})}),(0,o.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,o.jsxs)("span",{children:["Progress: ",p.sent,"/",p.total]}),(0,o.jsxs)("span",{children:["Success: ",p.success," | Failed: ",p.failed]})]})]})]}),b&&(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Results Summary"}),(0,o.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,o.jsxs)("p",{className:"text-green-800",children:["\u2705 Successfully sent: ",b.success," messages",(0,o.jsx)("br",{}),"\u274c Failed: ",b.failed," messages"]})})]}),h&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Confirm Batch Messaging"}),(0,o.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to send messages to ",r.length," recipients? This action cannot be undone."]}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsx)("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{if(l.trim())if(0!==r.length){x(!0),u({sent:0,total:r.length,success:0,failed:0});try{const e=await i.sendBatchMessages(l,r,(e,t,a,s)=>{u({sent:e,total:t,success:a,failed:s})});y(e),g(!1),alert(`Batch messaging completed!\nSuccessful: ${e.success}\nFailed: ${e.failed}`)}catch(e){console.error("Batch messaging error:",e),alert("Failed to send messages. Please try again.")}finally{x(!1)}}else alert("No bookings found to send messages to");else alert("Please enter a message template")},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Send Messages"})]})]})})]}),(0,o.jsxs)("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[(0,o.jsx)("button",{onClick:v,disabled:m,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:m?"Sending...":"Close"}),(0,o.jsxs)("button",{onClick:()=>g(!0),disabled:m||!l.trim(),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:["Send Messages (",r.length,")"]})]})]})}):null},c=()=>{const[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)([]),[i,c]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=document.createElement("style");e.textContent="\n      .resizable-table {\n        border-collapse: separate;\n        border-spacing: 0;\n        width: 100%;\n      }\n      .resizable-table th {\n        position: relative;\n        user-select: none;\n        border-right: 1px solid #e2e8f0;\n      }\n      .resizable-table th .resize-handle {\n        position: absolute;\n        top: 0;\n        right: 0;\n        width: 5px;\n        height: 100%;\n        cursor: col-resize;\n        background: transparent;\n        z-index: 1;\n      }\n      .resizable-table th .resize-handle:hover {\n        background: rgba(59, 130, 246, 0.4);\n      }\n      .resizable-table th.resizing {\n        user-select: none;\n      }\n    ",document.head.appendChild(e);return setTimeout(()=>{const e=document.querySelector(".resizable-table");if(!e)return;const t=e.querySelectorAll("th");t.forEach((e,a)=>{if(a===t.length-1)return;const s=e.querySelector(".resize-handle");s&&s.remove();const r=document.createElement("div");r.className="resize-handle",e.appendChild(r);let l=!1,n=0,i=0;r.addEventListener("mousedown",t=>{l=!0,n=t.clientX,i=e.offsetWidth,e.classList.add("resizing"),document.body.style.cursor="col-resize",t.preventDefault()}),document.addEventListener("mousemove",t=>{if(!l)return;const a=t.clientX-n,s=Math.max(100,i+a);e.style.width=s+"px",e.style.minWidth=s+"px"}),document.addEventListener("mouseup",()=>{l&&(l=!1,e.classList.remove("resizing"),document.body.style.cursor="default")})})},100),()=>{document.head.removeChild(e)}},[a]);const[p,u]=(0,s.useState)({}),[h,g]=(0,s.useState)([]),[b,y]=(0,s.useState)([]),[f,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{v()},[]);const v=async()=>{t(!0);try{const e=await(0,r.Xp)();n(e)}catch(e){console.error("Failed to fetch bookings:",e),alert("Failed to fetch bookings. Please try again.")}finally{t(!1)}},j=async e=>{try{console.log("Loading available time slots for date:",e);const t=await(0,r.oZ)(e);console.log("Available slots:",t),g(t)}catch(t){console.error("Failed to load available time slots:",t),g([])}},w=async(e,t)=>{try{const a=await(0,r.oZ)(e);a.includes(t)||a.push(t),y(a.sort())}catch(a){console.error("Failed to load available time slots for editing:",a),y([t])}},k=e=>{if(!e)return"N/A";try{return new Date(e.toDate()).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}catch{return"N/A"}};return(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8 relative z-10",children:(0,o.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-slate-200",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Admin Panel - Booking Management"}),(0,o.jsxs)("div",{className:"flex space-x-3",children:[(0,o.jsx)("button",{onClick:async()=>{x(!0);const e=l.J.eventDate;u({...p,date:e}),await j(e)},className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-lg hover:from-emerald-600 hover:to-teal-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:"Add Booking"}),(0,o.jsxs)("button",{onClick:()=>N(!0),disabled:e||0===a.length,className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50",children:["Message (",a.length,")"]}),(0,o.jsx)("button",{onClick:async()=>{t(!0);try{const e=await(0,r.Y8)();if(e){const t=`dance_event_bookings_${(new Date).toISOString().split("T")[0]}.csv`;(0,r.Bf)(e,t)}else alert("No bookings found to export.")}catch(e){console.error("Export failed:",e),alert("Export failed. Please try again.")}finally{t(!1)}},disabled:e,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 disabled:opacity-50",children:e?"Exporting...":"Export CSV"})]})]}),e?(0,o.jsx)("div",{className:"flex justify-center items-center p-12",children:(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 border-purple-400/30 border-t-purple-400 rounded-full animate-spin"}),(0,o.jsx)("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-t-pink-400 rounded-full animate-spin animation-delay-150"})]})}):(0,o.jsxs)("div",{className:"overflow-x-auto",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:["All Bookings (",a.length," records)"]}),(0,o.jsxs)("table",{className:"min-w-full bg-white/80 backdrop-blur-sm border border-slate-200 rounded-lg overflow-hidden resizable-table",style:{tableLayout:"fixed"},children:[(0,o.jsx)("thead",{className:"bg-gradient-to-r from-blue-100 to-indigo-200 text-gray-800",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"160px",minWidth:"100px"},children:"Actions"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"160px",minWidth:"160px"},children:"Time"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"90px",minWidth:"90px"},children:"Type"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"110px",minWidth:"110px"},children:"Price/Person"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"180px",minWidth:"180px"},children:"Participant Name"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"140px",minWidth:"140px"},children:"Phone"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"220px",minWidth:"220px"},children:"Email"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"120px",minWidth:"120px"},children:"City"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"150px",minWidth:"150px"},children:"Guru Name"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"120px",minWidth:"120px"},children:"Category"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"120px",minWidth:"120px"},children:"Amount/Slot"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"160px",minWidth:"160px"},children:"Timestamp"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"180px",minWidth:"180px"},children:"Payment ID"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"120px",minWidth:"120px"},children:"Status"}),(0,o.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{width:"140px",minWidth:"140px"},children:"Booking ID"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-slate-200",children:a.map((e,t)=>(0,o.jsxs)("tr",{className:"hover:bg-slate-50 transition-colors",children:[(0,o.jsx)("td",{className:"px-4 py-2 text-sm border-b border-slate-200",children:(0,o.jsxs)("div",{className:"flex space-x-1",children:[(0,o.jsx)("button",{onClick:async()=>{c(e),await w(e.date,e.timeSlot)},className:"px-2 py-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-xs rounded hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 shadow-sm",children:"Edit"}),(0,o.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this booking?"))try{await(0,r.VA)(e),await v(),alert("Booking deleted successfully")}catch(t){console.error("Delete failed:",t),alert("Failed to delete booking. Please try again.")}})(e.id),className:"px-2 py-1 bg-gradient-to-r from-red-500 to-rose-500 text-white text-xs rounded hover:from-red-600 hover:to-rose-600 transition-all duration-300 shadow-sm",children:"Delete"})]})}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.timeSlot}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.performanceTypeName}),(0,o.jsxs)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:["\u20b9",e.pricePerPerson]}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.participantName}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:"duet"===e.performanceType?`${e.participant1Phone||""} / ${e.participant2Phone||""}`:e.phoneNumber||e.representativePhone||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.email||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.cityResidence||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.guruName||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.performanceCategory||"-"}),(0,o.jsxs)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:["\u20b9",e.amountPerSlot]}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:k(e.timestamp)}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.paymentId||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.paymentStatus||"-"}),(0,o.jsx)("td",{className:"px-4 py-2 text-sm text-slate-700 border-b border-slate-200",children:e.bookingId})]},e.id||t))})]})]}),(0,o.jsxs)("div",{className:"mt-8 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[(0,o.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Admin Panel Instructions"}),(0,o.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"View Bookings:"})," All bookings are displayed by default"]}),(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"Add Booking:"}),' Click "Add Booking" to manually add a new booking']}),(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"Edit Booking:"}),' Click "Edit" on any row to modify booking details']}),(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"Delete Booking:"}),' Click "Delete" to remove a booking (with confirmation)']}),(0,o.jsxs)("li",{children:["\u2022 ",(0,o.jsx)("strong",{children:"Export CSV:"})," Download all bookings as a CSV file"]}),(0,o.jsx)("li",{children:"\u2022 CSV files can be opened in Excel, Google Sheets, or any spreadsheet application"})]})]}),i&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Edit Booking"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Booking ID"}),(0,o.jsx)("input",{type:"text",value:i.bookingId,onChange:e=>c({...i,bookingId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,o.jsx)("input",{type:"date",value:i.date,onChange:async e=>{const t=e.target.value;c({...i,date:t}),await w(t,i.timeSlot)},className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Time Slot"}),(0,o.jsxs)("select",{value:i.timeSlot,onChange:e=>c({...i,timeSlot:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,o.jsx)("option",{value:"",children:"Select a time slot"}),b.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Performance Type"}),(0,o.jsx)("input",{type:"text",value:i.performanceTypeName,onChange:e=>c({...i,performanceTypeName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),"duet"===i.performanceType?(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Participant 1 Phone"}),(0,o.jsx)("input",{type:"text",value:i.participant1Phone||"",onChange:e=>c({...i,participant1Phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Participant 2 Phone"}),(0,o.jsx)("input",{type:"text",value:i.participant2Phone||"",onChange:e=>c({...i,participant2Phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}):"group"===i.performanceType?(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Representative Phone"}),(0,o.jsx)("input",{type:"text",value:i.representativePhone||"",onChange:e=>c({...i,representativePhone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,o.jsx)("input",{type:"text",value:i.phoneNumber||"",onChange:e=>c({...i,phoneNumber:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,o.jsx)("input",{type:"email",value:i.email||"",onChange:e=>c({...i,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,o.jsx)("input",{type:"text",value:i.cityResidence||"",onChange:e=>c({...i,cityResidence:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Guru Name"}),(0,o.jsx)("input",{type:"text",value:i.guruName||"",onChange:e=>c({...i,guruName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Performance Category"}),(0,o.jsx)("input",{type:"text",value:i.performanceCategory||"",onChange:e=>c({...i,performanceCategory:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount Per Slot"}),(0,o.jsx)("input",{type:"number",value:i.amountPerSlot,onChange:e=>c({...i,amountPerSlot:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,o.jsx)("button",{onClick:()=>c(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>(async e=>{try{await(0,r.vq)(e),c(null),await v(),alert("Booking updated successfully")}catch(t){console.error("Update failed:",t),alert("Failed to update booking. Please try again.")}})(i),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Update"})]})]})}),m&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add New Booking"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Booking ID"}),(0,o.jsx)("input",{type:"text",value:p.bookingId||"",onChange:e=>u({...p,bookingId:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,o.jsx)("input",{type:"date",value:p.date||"",onChange:async e=>{const t=e.target.value;u({...p,date:t,timeSlot:""}),await j(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Time Slot"}),(0,o.jsxs)("select",{value:p.timeSlot||"",onChange:e=>u({...p,timeSlot:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,o.jsx)("option",{value:"",children:"Select a time slot"}),h.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Performance Type"}),(0,o.jsx)("input",{type:"text",value:p.performanceTypeName||"",onChange:e=>u({...p,performanceTypeName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,o.jsx)("input",{type:"text",value:p.fullName||"",onChange:e=>u({...p,fullName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,o.jsx)("input",{type:"text",value:p.phoneNumber||"",onChange:e=>u({...p,phoneNumber:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,o.jsx)("input",{type:"email",value:p.email||"",onChange:e=>u({...p,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,o.jsx)("input",{type:"text",value:p.cityResidence||"",onChange:e=>u({...p,cityResidence:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Guru Name"}),(0,o.jsx)("input",{type:"text",value:p.guruName||"",onChange:e=>u({...p,guruName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Performance Category"}),(0,o.jsx)("input",{type:"text",value:p.performanceCategory||"",onChange:e=>u({...p,performanceCategory:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount Per Slot"}),(0,o.jsx)("input",{type:"number",value:p.amountPerSlot||"",onChange:e=>u({...p,amountPerSlot:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,o.jsx)("button",{onClick:()=>{x(!1),u({})},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{onClick:async()=>{try{await(0,r.Bx)(p),x(!1),u({}),await v(),alert("Booking added successfully")}catch(e){console.error("Add failed:",e),alert("Failed to add booking. Please try again.")}},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Add Booking"})]})]})}),(0,o.jsx)(d,{isOpen:f,onClose:()=>N(!1),bookings:a})]})})}}}]);
//# sourceMappingURL=22.09b1d2bb.chunk.js.map